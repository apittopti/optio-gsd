{
  "phase": 1,
  "title": "Task System Integration",
  "milestone": "v2.2.0",
  "feature": "F002",
  "created": "2026-01-25",
  "wave_count": 2,
  "task_count": 3,
  "tasks": [
    {
      "id": "01",
      "wave": 1,
      "title": "Add TaskCreate/TaskList to executor startup",
      "files": [
        {"path": "agents/opti-gsd/opti-gsd-executor.md", "action": "modify"}
      ],
      "test_required": false,
      "action": "Update the Startup Sequence section to include Claude Code Task integration. Add step after loading plan.json: 'Initialize Claude Code Tasks - For each task in plan.json, call TaskCreate with: subject='T{id}: {title}', description=task action summary, activeForm='Executing T{id}: {title}'. Store returned task IDs in memory for status updates. Call TaskList to display initial progress overview.' Add note that these are ephemeral visual tasks, plan.json remains source of truth.",
      "verify": [
        {"type": "content", "check": "agents/opti-gsd/opti-gsd-executor.md contains TaskCreate instructions"},
        {"type": "content", "check": "agents/opti-gsd/opti-gsd-executor.md mentions TaskList for progress display"}
      ],
      "done": "Executor startup sequence includes TaskCreate for all plan tasks and TaskList call"
    },
    {
      "id": "02",
      "wave": 1,
      "title": "Add TaskUpdate to task execution flow",
      "files": [
        {"path": "agents/opti-gsd/opti-gsd-executor.md", "action": "modify"}
      ],
      "test_required": false,
      "action": "Update Per-Task Execution section to include TaskUpdate calls. At task start: TaskUpdate with status='in_progress'. On task complete: TaskUpdate with status='completed'. On task failure: TaskUpdate with status noting the failure. Update 'Task Complete' output format to mention Claude task was updated. Update 'Task Failed' output format similarly.",
      "verify": [
        {"type": "content", "check": "Per-Task Execution section includes TaskUpdate calls"},
        {"type": "content", "check": "TASK COMPLETE format references task status update"}
      ],
      "done": "Task execution includes in_progress and completed status updates via TaskUpdate"
    },
    {
      "id": "03",
      "wave": 2,
      "depends_on": ["01", "02"],
      "title": "Document task integration in execute.md",
      "files": [
        {"path": "commands/opti-gsd/execute.md", "action": "modify"}
      ],
      "test_required": false,
      "action": "Add a new section 'Claude Code Task Integration' explaining: (1) Tasks from plan.json are mirrored to Claude Code's built-in task system for visual progress, (2) Two-layer architecture diagram showing plan.json as persistent source of truth and Claude tasks as ephemeral visual layer, (3) Subagents can use TaskGet to read task context, (4) Benefits: real-time progress visibility, shared state between agents.",
      "verify": [
        {"type": "content", "check": "execute.md contains 'Claude Code Task Integration' section"},
        {"type": "content", "check": "execute.md explains two-layer architecture"}
      ],
      "done": "Execute command documentation explains task integration feature with architecture diagram"
    }
  ],
  "key_links": [
    "plan.json tasks -> TaskCreate -> Claude Code Task UI",
    "Task execution -> TaskUpdate -> real-time status",
    "execute.md documents -> opti-gsd-executor.md implements"
  ]
}
